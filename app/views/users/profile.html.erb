<div class="container profile-page">
  <div class="mt-4">
    <h1 class="profile-title">Your Dashboard</h1>
  </div>
  <div class="profile-info-container">
    <div class="profile-info-wrapper">
      <div class="profile-user-info row">
        <p class="pt-2">You've Saved:</p>
        <h2><%= number_with_precision(@total_carbon.to_f, precision: 2) %> kg CO<span class="subscript"><sub>2</sub></span></h2>
        <h2><%= number_to_currency(@total_saving, unit: "£", precision: 2) %></h2>
      </div>
    </div>
  </div>

  <hr class="divider" >

  <!-- Barcode scanner -->
  <%# <div data-controller="barcode">
    <div id="reader" data-barcode-target="reader">
    </div>
  </div> %>


  <!-- Manual add ingredients -->
  <%= render "user_ingredients/modal_profile", user_ingredient: @user_ingredient %>

  <!-- this section should be done with the for each ingredient added -->
  <div class="profile-page-ingredients-list mt-4">
    <% @user.user_ingredients.each do |user_ingredient| %>
      <div class="pp-ingredient-card">
        <div class="pp-ingredient-details">
          <p class="pp-ingredient-name"><%= user_ingredient.ingredient.name %></p>
          <p class="pp-ingredient-quantity"><%= user_ingredient.weight_in_grams %>g</p>
          <p><i class="fa-regular fa-calendar"></i><%= user_ingredient.expiry_date.strftime("%d/%m/%Y") %></p>
        </div>
        <div class="pp-ingredient-price">
          <%= number_to_currency(user_ingredient.price_in_pounds, unit: "£", precision: 2) %>
        </div>
      </div>
    <% end %>
  </div>
</div>
